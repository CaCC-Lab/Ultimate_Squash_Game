# アクセシビリティ機能ガイド

Ultimate Squash Gameは、様々なユーザーがゲームを楽しめるように、包括的なアクセシビリティ機能を提供しています。

## 機能一覧

### 1. 色覚モード
視覚特性に応じて、ゲームの色をフィルタリングします。

- **標準**: デフォルトの色設定
- **P型（赤緑色覚）**: Protanopia向けの調整
- **D型（赤緑色覚）**: Deuteranopia向けの調整
- **T型（青黄色覚）**: Tritanopia向けの調整
- **全色覚**: Achromatopsia向けのグレースケール表示

### 2. 高コントラストモード
視認性を向上させるための高コントラスト表示モード。

- 背景: 純黒
- ボール: 白色
- ラケット: 黄色
- テキスト: 白色
- UI要素: 白と黄色の組み合わせ

### 3. 明るさ調整（ガンマ補正）
画面の明るさを0.5〜2.0の範囲で調整可能。

### 4. モーション軽減
アニメーションを無効化し、静的な表示に切り替えます。

### 5. 効果音の音量調整
0〜100%の範囲で音量を調整（将来的な実装予定）。

## 使い方

### アクセシビリティパネルの表示
- キーボード: `A`キーを押す
- 画面: 右下の「♿ アクセシビリティ」ボタンをクリック

### 設定の保存
すべての設定は自動的にブラウザのローカルストレージに保存され、次回のゲーム起動時に自動的に適用されます。

## 技術仕様

### 色覚フィルター
SVGフィルターを使用して、画面全体の色を変換します。

```svg
<!-- Protanopia (P型色覚) フィルター -->
<filter id="protanopia-filter">
    <feColorMatrix type="matrix" values="
        0.567, 0.433, 0,     0, 0
        0.558, 0.442, 0,     0, 0
        0,     0.242, 0.758, 0, 0
        0,     0,     0,     1, 0" />
</filter>
```

### 高コントラストモード
CSSクラスとJavaScriptによる動的な色変更を組み合わせて実装。

```javascript
// Canvas描画時の色変更
const colors = accessibilitySettings.highContrast ? 
              accessibilitySettings.canvasColors.highContrast : 
              accessibilitySettings.canvasColors.standard;
```

### ローカルストレージ
```javascript
// 設定の保存
localStorage.setItem('ultimateSquashAccessibility', JSON.stringify(accessibilitySettings));

// 設定の読み込み
const saved = localStorage.getItem('ultimateSquashAccessibility');
```

## アクセシビリティ設計原則

1. **包括的設計**: 様々な視覚特性を持つユーザーに対応
2. **カスタマイズ性**: ユーザーが自分に合った設定を選択可能
3. **永続性**: 設定は自動保存され、再訪問時も維持
4. **パフォーマンス**: アクセシビリティ機能がゲームの動作に影響しない
5. **直感的UI**: 設定変更が簡単で分かりやすい

## 今後の改善予定

1. **音声ガイド**: スクリーンリーダー対応
2. **キーボードカスタマイズ**: 操作キーの変更機能
3. **フォントサイズ調整**: UI要素のテキストサイズ変更
4. **効果音のビジュアル表示**: 音の代わりに視覚的フィードバック
5. **詳細なコントラスト調整**: 個別要素のコントラスト設定